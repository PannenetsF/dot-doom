#+TITLE: Doom Config 

* Install 

** Mac
#+begin_src
brew install emacs-plus --with-modern-black-dragon-icon --with-mailutils --with-imagemagick
#+end_src

** Linux 
#+begin_src
apt-get install build-essential -y
GCC_MAJOR=$(gcc -dumpfullversion -dumpversion | cut -d. -f1)
apt install libgccjit-${GCC_MAJOR}-dev -y
apt install tmux wget zsh -y
apt install gnutls-bin libgnutls28-dev -y
apt install libtool libtool-bin -y
apt install pkg-config -y
apt install autoconf texinfo -y
apt install software-properties-common -y
apt-get install libcurl4-gnutls-dev -y
apt-get install gettext -y
apt-get install tmux -y

cd /usr/src
wget https://www.kernel.org/pub/software/scm/git/git-2.48.0.tar.gz
tar xzf git-2.48.0.tar.gz
cd git-2.48.0
make prefix=/usr/local/ NO_TCLTK=1 all -j64
make prefix=/usr/local/ NO_TCLTK=1 install
apt remove git -y


mkdir -p ~/emacs_build
cd ~/emacs_build
rm "emacs*" -rf
wget -c  https://ftpmirror.gnu.org/emacs/emacs-30.1.tar.gz
tar xvfz emacs-30.1.tar.gz
export CC=gcc

git clone https://github.com/tree-sitter/tree-sitter.git
cd tree-sitter/
make -j128
make install
cd ..

cd emacs-30.1
./configure --with-native-compilation=aot --with-tree-sitter
make -j128
make install
#+end_src


* Setup Doom 
#+begin_src
rm -rf ~/.config/doom ~/.config/emacs 
git clone https://github.com/PannenetsF/dot-doom.git ~/.config/doom
git clone https://github.com/doomemacs/doomemacs ~/.config/emacs
~/.config/emacs/bin/doom install --doomdir ~/.config/doom --no-env
~/.config/emacs/bin/doom env -o ~/.config/doom/doomenv --allow-all
~/.config/emacs/bin/doom sync
#+end_src

* Color
name it =src.src=
#+begin_src
xterm-emacs|xterm with 24-bit direct color mode for Emacs,
  use=xterm-256color,
  setb24=\E[48\:2\:\:%p1%{65536}%/%d\:%p1%{256}%/%{255}%&\
     %d\:%p1%{255}%&%dm,
  setf24=\E[38\:2\:\:%p1%{65536}%/%d\:%p1%{256}%/%{255}%&\
     %d\:%p1%{255}%&%dm,
#+end_src
run =tic -x -o ~/.terminfo src.src=
then there is a new TERM option =xterm-emacs=
